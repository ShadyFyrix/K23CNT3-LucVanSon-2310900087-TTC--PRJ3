<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{LvsAreas/LvsUsers/LvsLayout/LvsUser-layout}">

<head>
    <title>Dự án của tôi - Electro Store</title>
</head>

<body>
    <div layout:fragment="content">
        <div class="container mx-auto px-4 py-8">
            <!-- Header -->
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-3xl font-bold text-white">
                    <i class="fas fa-folder mr-3 text-[#fed700]"></i>Dự án của tôi
                </h1>
                <a th:href="@{/LvsUser/LvsProject/LvsAdd}"
                    class="bg-[#fed700] text-black font-bold px-6 py-3 rounded-lg hover:bg-yellow-400 transition">
                    <i class="fas fa-plus mr-2"></i>Thêm dự án mới
                </a>
            </div>

            <!-- Tabs -->
            <div class="mb-8">
                <div class="flex gap-4 border-b border-[#333]">
                    <a th:href="@{/LvsUser/LvsProject/LvsMyProjects(tab='created')}"
                        th:classappend="${LvsActiveTab == 'created'} ? 'border-[#fed700] text-[#fed700]' : 'border-transparent text-gray-400 hover:text-white'"
                        class="px-6 py-3 font-semibold border-b-2 transition">
                        <i class="fas fa-upload mr-2"></i>Đã tạo
                    </a>
                    <a th:href="@{/LvsUser/LvsProject/LvsMyProjects(tab='purchased')}"
                        th:classappend="${LvsActiveTab == 'purchased'} ? 'border-[#fed700] text-[#fed700]' : 'border-transparent text-gray-400 hover:text-white'"
                        class="px-6 py-3 font-semibold border-b-2 transition">
                        <i class="fas fa-shopping-cart mr-2"></i>Đã mua
                    </a>
                </div>
            </div>

            <!-- Empty State -->
            <div th:if="${LvsProjects == null or LvsProjects.isEmpty()}" class="text-center py-16">
                <i class="fas fa-folder-open text-6xl text-gray-600 mb-4"></i>
                <p class="text-gray-400 text-xl mb-4"
                    th:text="${LvsActiveTab == 'purchased'} ? 'Bạn chưa mua dự án nào' : 'Bạn chưa tạo dự án nào'">
                    Bạn chưa có dự án nào
                </p>
                <a th:if="${LvsActiveTab == 'created'}" th:href="@{/LvsUser/LvsProject/LvsAdd}"
                    class="inline-block bg-[#fed700] text-black font-bold px-6 py-3 rounded-lg hover:bg-yellow-400 transition">
                    Tạo dự án đầu tiên
                </a>
                <a th:if="${LvsActiveTab == 'purchased'}" th:href="@{/LvsUser/LvsProject/LvsList}"
                    class="inline-block bg-[#fed700] text-black font-bold px-6 py-3 rounded-lg hover:bg-yellow-400 transition">
                    Khám phá dự án
                </a>
            </div>

            <!-- Projects Grid -->
            <div th:if="${LvsProjects != null and !LvsProjects.isEmpty()}"
                class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div th:each="project : ${LvsProjects}"
                    class="bg-[#2b2b2b] border border-[#333] rounded-xl overflow-hidden hover:border-[#fed700] transition">

                    <!-- Project Image -->
                    <div class="h-48 bg-[#1e1e1e] flex items-center justify-center overflow-hidden">
                        <img th:if="${project.lvsThumbnailUrl}" th:src="@{${project.lvsThumbnailUrl}}"
                            th:alt="${project.lvsProjectName}" class="w-full h-full object-cover">
                        <i th:unless="${project.lvsThumbnailUrl}" class="fas fa-image text-6xl text-gray-600"></i>
                    </div>

                    <!-- Project Info -->
                    <div class="p-6">
                        <h3 class="text-white font-bold text-lg mb-2 line-clamp-2" th:text="${project.lvsProjectName}">
                            Project</h3>

                        <!-- Sale Status Badge -->
                        <div class="mb-2">
                            <span th:if="${project.lvsHasActiveDiscount}"
                                class="bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold">
                                <i class="fas fa-fire mr-1"></i>SALE ACTIVE
                            </span>
                            <span th:if="${project.lvsIsOnSale and !project.lvsHasActiveDiscount}"
                                class="bg-gray-500 text-white px-3 py-1 rounded-full text-xs font-bold">
                                <i class="fas fa-clock mr-1"></i>SALE SCHEDULED
                            </span>
                        </div>

                        <!-- Price with Discount -->
                        <div class="mb-2">
                            <div th:if="${project.lvsHasActiveDiscount}">
                                <div class="text-gray-400 line-through text-sm">
                                    <span th:text="${#numbers.formatCurrency(project.lvsPrice)}">$0</span>
                                </div>
                                <div class="text-[#fed700] font-bold text-xl">
                                    <span th:text="${#numbers.formatCurrency(project.lvsFinalPrice)}">$0</span>
                                </div>
                                <div class="text-orange-400 text-xs font-semibold">
                                    <span th:text="${project.lvsDiscountPercent}">0</span>% OFF
                                </div>
                            </div>
                            <div th:unless="${project.lvsHasActiveDiscount}">
                                <p class="text-[#fed700] font-bold text-xl"
                                    th:text="${#numbers.formatCurrency(project.lvsPrice)}">$0</p>
                            </div>
                        </div>

                        <p class="text-gray-400 text-sm mb-4">
                            <i class="fas fa-eye mr-1"></i>
                            <span th:text="${project.lvsViewCount}">0</span> lượt xem
                        </p>

                        <!-- Actions for Created Projects -->
                        <div th:if="${LvsActiveTab == 'created'}" class="flex gap-2">
                            <a th:href="@{/LvsUser/LvsProject/LvsEdit/{id}(id=${project.lvsProjectId})}"
                                class="flex-1 bg-[#1e1e1e] border border-[#444] text-white text-center py-2 rounded-lg hover:border-[#fed700] transition">
                                <i class="fas fa-edit mr-1"></i>Sửa
                            </a>
                            <a th:href="@{/LvsUser/LvsProject/LvsDetail/{id}(id=${project.lvsProjectId})}"
                                class="flex-1 bg-[#fed700] text-black text-center py-2 rounded-lg hover:bg-yellow-400 transition">
                                <i class="fas fa-eye mr-1"></i>Xem
                            </a>
                        </div>

                        <!-- Actions for Purchased Projects -->
                        <div th:if="${LvsActiveTab == 'purchased'}" class="flex gap-2">
                            <a th:href="@{/LvsUser/LvsProject/LvsDetail/{id}(id=${project.lvsProjectId})}"
                                class="flex-1 bg-[#fed700] text-black text-center py-2 rounded-lg hover:bg-yellow-400 transition">
                                <i class="fas fa-download mr-1"></i>Tải xuống
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pagination -->
            <div th:if="${LvsProjects != null and LvsProjects.totalPages > 1}" class="flex justify-center mt-8 gap-2">
                <a th:if="${LvsProjects.hasPrevious()}"
                    th:href="@{/LvsUser/LvsProject/LvsMyProjects(tab=${LvsActiveTab}, page=${LvsCurrentPage - 1})}"
                    class="px-4 py-2 bg-[#2b2b2b] border border-[#444] text-white rounded-lg hover:border-[#fed700] transition">
                    <i class="fas fa-chevron-left"></i>
                </a>

                <span class="px-4 py-2 bg-[#fed700] text-black font-bold rounded-lg">
                    <span th:text="${LvsCurrentPage + 1}">1</span> / <span th:text="${LvsProjects.totalPages}">1</span>
                </span>

                <a th:if="${LvsProjects.hasNext()}"
                    th:href="@{/LvsUser/LvsProject/LvsMyProjects(tab=${LvsActiveTab}, page=${LvsCurrentPage + 1})}"
                    class="px-4 py-2 bg-[#2b2b2b] border border-[#444] text-white rounded-lg hover:border-[#fed700] transition">
                    <i class="fas fa-chevron-right"></i>
                </a>
            </div>
        </div>
    </div>
</body>

</html>