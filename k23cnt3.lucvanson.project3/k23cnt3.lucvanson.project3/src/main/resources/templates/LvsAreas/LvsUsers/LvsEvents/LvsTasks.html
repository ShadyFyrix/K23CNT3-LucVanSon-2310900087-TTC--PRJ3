<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{LvsAreas/LvsUsers/LvsLayout/LvsUser-layout}">

<head>
    <title>Daily Tasks - WeJect</title>
</head>

<body>
    <div layout:fragment="content">
        <div class="container mx-auto px-4 py-8">
            <h1 class="text-3xl font-bold text-white mb-8">
                <i class="fas fa-tasks text-[#fed700] mr-3"></i>Daily Tasks
            </h1>

            <!-- Unclaimed Rewards -->
            <div th:if="${lvsUnclaimedRewards != null and !lvsUnclaimedRewards.isEmpty()}"
                class="bg-green-500/20 border border-green-500 rounded-xl p-6 mb-8">
                <h3 class="text-xl font-bold text-white mb-4">
                    <i class="fas fa-gift mr-2"></i>Unclaimed Rewards
                </h3>
                <div class="space-y-3">
                    <div th:each="reward : ${lvsUnclaimedRewards}"
                        class="flex justify-between items-center bg-black/30 p-4 rounded">
                        <div class="text-white">
                            <span th:text="${reward.lvsEvent.lvsEventName}">Event</span>
                            <span class="text-sm text-gray-400 ml-2"
                                th:text="${#temporals.format(reward.lvsCompletedAt, 'dd/MM/yyyy')}">Date</span>
                        </div>
                        <form th:action="@{/LvsUser/LvsEvent/LvsClaimReward/{id}(id=${reward.lvsUserEventId})}"
                            method="post">
                            <button type="submit"
                                class="bg-[#fed700] text-black px-6 py-2 rounded font-bold hover:bg-yellow-600">
                                Claim <span th:text="${reward.lvsCoinsEarned}">0</span> Coins
                            </button>
                        </form>
                    </div>
                </div>
                <form th:action="@{/LvsUser/LvsEvent/LvsClaimAll}" method="post" class="mt-4">
                    <button type="submit"
                        class="bg-green-500 text-white px-8 py-3 rounded-lg font-bold hover:bg-green-600">
                        <i class="fas fa-check-double mr-2"></i>Claim All Rewards
                    </button>
                </form>
            </div>

            <!-- Available Tasks -->
            <div class="grid md:grid-cols-2 gap-6">
                <div th:each="event : ${lvsEvents}" th:if="${event.lvsType.name() == 'DAILY_TASK'}"
                    class="bg-[#2b2b2b] border border-[#333] rounded-xl p-6">
                    <div class="flex items-start justify-between mb-4">
                        <div>
                            <h3 class="text-xl font-bold text-white" th:text="${event.lvsEventName}">Task Name</h3>
                            <p class="text-gray-400 mt-2" th:text="${event.lvsDescription}">Description</p>
                        </div>
                        <div class="text-[#fed700] font-bold text-2xl">
                            <span th:text="${event.lvsRewardCoins}">0</span>
                            <i class="fas fa-coins text-lg"></i>
                        </div>
                    </div>
                    <div class="text-sm text-gray-500">
                        <i class="fas fa-info-circle mr-1"></i>Complete this task to earn coins!
                    </div>
                </div>
            </div>

            <!-- Empty state -->
            <div th:if="${lvsEvents == null or lvsEvents.isEmpty()}" class="text-center py-12 text-gray-400">
                <i class="fas fa-inbox text-6xl mb-4"></i>
                <p class="text-lg">No tasks available right now</p>
            </div>
        </div>
    </div>
</body>

</html>